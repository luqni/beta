jQuery(document).ready(function(){jQuery("#lc_caching_engine").after(' <a href="#" class="dslc-clear-cache" onclick="dslc_clear_cache(event)"><span class="dashicons dashicons-trash"></span> clear cache</a>');function a(a){var b,c=jQuery(".dslca-plugin-opts-list-code",a),d="",e=false;var f=[];jQuery(".dslca-plugin-opts-list-item",a).each(function(){if(jQuery.inArray(jQuery(this).find(".dslca-plugin-opts-list-title").text(),f)!==-1){e=true}else{f.push(jQuery(this).find(".dslca-plugin-opts-list-title").text())}});if(e){jQuery(".dslca-plugin-opts-list-error").show()}else{jQuery(".dslca-plugin-opts-list-error").hide()}jQuery(".dslca-plugin-opts-list-item",a).each(function(){b=jQuery(this).find(".dslca-plugin-opts-list-title").text();b=b.replace(/([^a-z0-9 ]+)/gi,"");jQuery(this).find(".dslca-plugin-opts-list-title").text(b);d+=b.trim()+","});c.val(d)}jQuery(".dslca-plugin-opts-list-add-hook").click(function(b){b.preventDefault();var c=jQuery(this).closest(".dslca-plugin-opts-list-wrap");var d=c.find(".dslca-plugin-opts-list");jQuery('<div class="dslca-plugin-opts-list-item"><span class="dslca-plugin-opts-list-title" contenteditable="true">Click to edit</span><a href="#" class="dslca-plugin-opts-list-delete-hook">delete</a></div>').appendTo(d);a(c)});jQuery(document).on("click",".dslca-plugin-opts-list-delete-hook",function(b){b.preventDefault();var c=jQuery(this).closest(".dslca-plugin-opts-list-wrap");var d=jQuery(this).closest(".dslca-plugin-opts-list-item");d.remove();a(c)});jQuery(document).on("blur",".dslca-plugin-opts-list-title",function(){var b=jQuery(this).closest(".dslca-plugin-opts-list-wrap");a(b)});jQuery(document).on("keypress",".dslca-plugin-opts-list-title",function(a){if(a.keyCode==13){jQuery(this).trigger("blur");a.preventDefault()}});jQuery(document).on("click",".lc-toggle-extension",function(a){a.preventDefault();$extensionId=a.target.getAttribute("data-id");var b=jQuery(a.target).closest(".extension");if(b[0]!==undefined){b=b[0]}else{console.error("Can't find extension parent for the clicked ellement.");return false}var c=b.getAttribute("data-extension-status");b.setAttribute("data-extension-status","pending");jQuery.ajax({type:"POST",data:{security:dslcajax,action:"dslc-ajax-toggle-extension",extension:$extensionId},url:ajaxurl}).done(function(a){if(a){b.setAttribute("data-extension-status",a)}else{b.setAttribute("data-extension-status",c)}}).fail(function(a){b.setAttribute("data-extension-status",c)})})});function dslc_clear_cache(a){a.preventDefault();jQuery(".dslc-clear-cache .dashicons").removeClass("dashicons-trash").addClass("dashicons-update dashicon-spin");jQuery.ajax({type:"POST",data:{security:dslcajax,action:"dslc_ajax_clear_cache"},url:ajaxurl}).done(function(){jQuery(".dslc-clear-cache").css("color","green");jQuery(".dslc-clear-cache").text("done");jQuery(".dslc-clear-cache").prepend('<span class="dashicons dashicons-yes"></span> ')})}